var B=Object.defineProperty;var q=(t,e,i)=>e in t?B(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var l=(t,e,i)=>(q(t,typeof e!="symbol"?e+"":e,i),i);import{D as L,W as m,V as c,p as s,c as A,$ as k}from"./index.79a2e431.js";import{t as G}from"./marked.esm.01ee1597.js";import{T as U}from"./clsx.f76af8a1.js";import"./lodash.966b3234.js";import"./index.01b533f1.js";import{i as x}from"./style.d07ab3f3.js";import"./space.81e99772.js";var W=`.t-image__wrapper{position:relative;background:var(--td-bg-color-secondarycontainer);z-index:1}.t-image__wrapper--shape-square{border-radius:0}.t-image__wrapper--shape-round{border-radius:var(--td-radius-medium)}.t-image__wrapper--shape-circle{border-radius:50%}.t-image__wrapper--gallery{border-radius:var(--td-radius-medium)}.t-image__wrapper--gallery .t-image{position:relative;z-index:5}.t-image__wrapper--need-hover{cursor:pointer}.t-image{width:100%;height:100%;border-radius:inherit;position:relative;z-index:inherit}.t-image--fit-fill{object-fit:fill}.t-image--fit-contain{object-fit:contain}.t-image--fit-cover{object-fit:cover}.t-image--fit-scale-down{object-fit:scale-down}.t-image--fit-none{object-fit:none}.t-image--position-center{object-position:center}.t-image--position-bottom{object-position:bottom}.t-image--position-top{object-position:top}.t-image--position-left{object-position:left}.t-image--position-right{object-position:right}.t-image__gallery-shadow{position:absolute;left:0;right:-24px;top:24px;bottom:24px;background:rgba(238,238,238,.26);border-radius:var(--td-radius-medium);z-index:3}.t-image__gallery-shadow:before,.t-image__gallery-shadow:after{content:"";position:absolute;left:0;border-radius:var(--td-radius-medium)}.t-image__gallery-shadow:after{top:-16px;right:16px;bottom:-16px;background:rgba(238,238,238,.8);z-index:4}.t-image__gallery-shadow:before{top:-8px;right:8px;bottom:-8px;background:rgba(238,238,238,.5);z-index:2}.t-image__placeholder{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;z-index:0}.t-image__overlay-content{position:absolute;left:0;top:0;width:100%;height:100%;z-index:6;opacity:1;visibility:visible;transition:visibility 0s,opacity .2s linear}.t-image__overlay-content--hidden{visibility:hidden;opacity:0}.t-image__loading,.t-image__error{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;z-index:1}.t-image__loading{color:var(--td-text-color-secondary)}.t-image__error{color:var(--td-text-color-disabled)}
`,I=W+G;function J(t,e,i,a){if(typeof window=="undefined")return null;if(!window||!window.IntersectionObserver)return i(),null;let r=null;try{r=new window.IntersectionObserver(o=>{o[0].isIntersecting&&(i(),r.unobserve(t))},{rootMargin:`0px 0px ${a}px 0px`,root:e}),r.observe(t)}catch(o){console.error(o),i()}return r}class g extends m{render(e){const i=c("t-icon",e.class,{["t-size-s"]:e.size==="small",["t-size-m"]:e.size==="medium",["t-size-l"]:e.size==="large"}),a=e.size==="small"||e.size==="medium"||e.size==="large",r={...e.style,fontSize:e.size};return s("svg",{class:i,width:a?"24":e.size,height:a?"24":e.size,style:r,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s("path",{d:"M2 2H22V12H20V4H4V13.5858L9 8.58579L14.4142 14L13 15.4142L9 11.4142L4 16.4142V20H12V22H2V2ZM15.5469 7C14.9946 7 14.5469 7.44772 14.5469 8C14.5469 8.55228 14.9946 9 15.5469 9C16.0992 9 16.5469 8.55228 16.5469 8C16.5469 7.44772 16.0992 7 15.5469 7ZM12.5469 8C12.5469 6.34315 13.89 5 15.5469 5C17.2037 5 18.5469 6.34315 18.5469 8C18.5469 9.65685 17.2037 11 15.5469 11C13.89 11 12.5469 9.65685 12.5469 8ZM16.1716 14.7574L19 17.5858L21.8284 14.7574L23.2426 16.1716L20.4142 19L23.2426 21.8284L21.8284 23.2426L19 20.4142L16.1716 23.2426L14.7574 21.8284L17.5858 19L14.7574 16.1716L16.1716 14.7574Z",fill:"black"}))}}l(g,"css",x),l(g,"defaultProps",{size:"1em",style:{fill:"#000"}}),l(g,"propTypes",{size:[String,Number],style:Object,class:String});L("t-icon-image-error",g);class h extends m{render(e){const i=c("t-icon",e.class,{["t-size-s"]:e.size==="small",["t-size-m"]:e.size==="medium",["t-size-l"]:e.size==="large"}),a=e.size==="small"||e.size==="medium"||e.size==="large",r={...e.style,fontSize:e.size};return s("svg",{class:i,width:a?"24":e.size,height:a?"24":e.size,style:r,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s("path",{d:"M17.0001 4C15.8956 4 15.0001 4.89543 15.0001 6C15.0001 7.10457 15.8956 8 17.0001 8C18.1047 8 19.0001 7.10457 19.0001 6C19.0001 4.89543 18.1047 4 17.0001 4ZM13.0001 6C13.0001 3.79086 14.791 2 17.0001 2C19.2093 2 21.0001 3.79086 21.0001 6C21.0001 8.20914 19.2093 10 17.0001 10C14.791 10 13.0001 8.20914 13.0001 6ZM9.92833 8.12361L14.3467 15.1388L16.9283 11.1641L23.9664 22H1.18848L9.92833 8.12361ZM9.92833 11.8764L4.81179 20H20.2825L16.9283 14.8359L14.3208 18.8504L9.92833 11.8764Z",fill:"black"}))}}l(h,"css",x),l(h,"defaultProps",{size:"1em",style:{fill:"#000"}}),l(h,"propTypes",{size:[String,Number],style:Object,class:String});L("t-icon-image-1",h);var K=Object.defineProperty,Q=Object.getOwnPropertyDescriptor,X=(t,e,i,a)=>{for(var r=a>1?void 0:a?Q(e,i):e,o=t.length-1,n;o>=0;o--)(n=t[o])&&(r=(a?n(e,i,r):n(r))||r);return a&&r&&K(e,i,r),r};let d=class extends m{constructor(){super(...arguments),this.componentName=U("image"),this.imageRef=A(),this.isLoaded=!1,this.hasError=!1,this.observerRefValue=null,this.handleLoadImage=()=>{this.shouldLoad=!0,this.update()},this.handleLoad=t=>{var e,i;this.isLoaded=!0,(i=(e=this.props).onLoad)==null||i.call(e,{e:t}),this.update()},this.handleError=t=>{var e,i;this.hasError=!0,(i=(e=this.props).onError)==null||i.call(e,{e:t}),this.update()},this.handleToggleOverlay=t=>{this.shouldShowOverlay=t,this.update()},this.handleObserve=()=>{const{lazy:t}=this.props,{imageRef:e,handleLoadImage:i}=this;!t||!(e!=null&&e.current)||this.observerRefValue!==this.imageRef.current&&(this.observerRefValue=e.current,this.io=J(this.observerRefValue,null,i,0))}}beforeUpdate(){this.handleObserve()}install(){const{src:t,lazy:e,overlayTrigger:i}=this.props;this.imageSrc=t,this.shouldLoad=!e,this.hasMouseEvent=i==="hover",this.shouldShowOverlay=!this.hasMouseEvent}installed(){this.handleObserve()}uninstall(){const{imageRef:t,io:e}=this;t.current&&e&&e.unobserve(t.current)}render(t){const{componentName:e,isLoaded:i,imageRef:a,hasMouseEvent:r,shouldShowOverlay:o,hasError:n,shouldLoad:p,imageSrc:O,handleToggleOverlay:f,handleError:S,handleLoad:j}=this,{class:C,src:Y,style:$,alt:E,fit:M,position:T,shape:V,placeholder:v,loading:P,error:N,overlayTrigger:ee,lazy:te,gallery:b,overlayContent:y,srcset:_,onLoad:ie,onError:re,...Z}=t,H=()=>y?s("div",{class:c(`${e}__overlay-content`,!o&&`${e}__overlay-content--hidden`)},y):null,R=()=>v?s("div",{class:`${e}__placeholder`},v):null,D=()=>b?s("div",{class:`${e}__gallery-shadow`}):null,w=u=>s("img",{src:u,onError:S,onLoad:j,class:c(e,`${e}--fit-${M}`,`${e}--position-${T}`),alt:E}),F=()=>s("picture",null,Object.entries(t.srcset).map(([u,z])=>s("source",{key:z,type:u,srcSet:z})),t.src&&w(t.src));return s("div",{ref:a,class:c(`${e}__wrapper`,`${e}__wrapper--shape-${V}`,b&&`${e}__wrapper--gallery`,r&&`${e}__wrapper--need-hover`,C),style:$,...r?{onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1)}:null,...Z},R(),D(),!(n||!p)&&s(s.f,null,_&&Object.keys(_).length?F():w(O),!(n||!p)&&!i&&s("div",{class:`${e}__loading`},P||s("t-space",{direction:"vertical",size:8,align:"center"},s("t-icon-image-1",{size:24}),"\u56FE\u7247\u52A0\u8F7D\u4E2D"))),n&&s("div",{class:`${e}__error`},N||s("t-space",{direction:"vertical",size:8,align:"center"},s("t-icon-image-error",{size:24}),"\u56FE\u7247\u65E0\u6CD5\u663E\u793A")),H())}};d.css=I;d.defaultProps={fit:"fill",gallery:!1,lazy:!1,overlayTrigger:"always",position:"center",shape:"square"};d.propTypes={alt:String,error:Object,fit:String,gallery:Boolean,lazy:Boolean,loading:Object,overlayContent:Object,overlayTrigger:String,placeholder:Object,position:String,shape:String,src:String,srcset:Object,onError:Function,onLoad:Function};d=X([k("t-image")],d);
