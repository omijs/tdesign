var W=Object.defineProperty;var N=(e,t,s)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var c=(e,t,s)=>(N(e,typeof t!="symbol"?t+"":t,s),s);import{W as g,c as $,V as d,p as o,$ as x,D as z}from"./index.7ac70225.js";import{d as M,p as S}from"./popup.8854d94f.js";import{t as I}from"./marked.esm.01ee1597.js";import{l as v}from"./lodash.0f80b01b.js";import{T as m}from"./clsx.f76af8a1.js";import"./index.184f6101.js";import{i as _}from"./style.d07ab3f3.js";import"./divider.bbe0b32b.js";var b=M+I,H=Object.defineProperty,A=Object.getOwnPropertyDescriptor,j=(e,t,s,i)=>{for(var n=i>1?void 0:i?A(t,s):t,r=e.length-1,a;r>=0;r--)(a=e[r])&&(n=(i?a(t,s,n):a(n))||n);return i&&n&&H(t,s,n),n};let p=class extends g{constructor(){super(...arguments),this.itemRef=$(),this.handleItemClick=e=>{var t,s;e.stopPropagation(),(s=(t=this.props).onClick)==null||s.call(t,this.props.value,e)}}render(e){const t=m("dropdown__item"),s=d(e.class,t,`${t}--theme-${e.theme}`,{[`${t}--active`]:e.active,[`${t}--disabled`]:e.disabled});return o("li",{class:s,onClick:this.handleItemClick,style:{maxWidth:S(e.maxColumnWidth),minWidth:S(e.minColumnWidth),...e.style},ref:this.itemRef},e.prefixIcon?o("div",{class:`${t}-icon`},e.prefixIcon):null,e.children)}};p.css=b;p.defaultProps={active:!1,disabled:!1,divider:!1,theme:"default",maxColumnWidth:100,minColumnWidth:10};p.propTypes={active:Boolean,content:Object,disabled:Boolean,divider:Boolean,prefixIcon:Object,theme:String,value:[String,Number,Object],maxColumnWidth:[String,Number],minColumnWidth:[String,Number],isSubmenu:Boolean};p=j([x("t-dropdown-item")],p);class C extends g{render(t){const s=d("t-icon",t.class,{["t-size-s"]:t.size==="small",["t-size-m"]:t.size==="medium",["t-size-l"]:t.size==="large"}),i=t.size==="small"||t.size==="medium"||t.size==="large",n={...t.style,fontSize:t.size};return o("svg",{class:s,width:i?"24":t.size,height:i?"24":t.size,style:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o("path",{d:"M8.08594 17.5L13.5859 12L8.08594 6.50003L9.50015 5.08582L16.4144 12L9.50015 18.9142L8.08594 17.5Z",fill:"black"}))}}c(C,"css",_),c(C,"defaultProps",{size:"1em",style:{fill:"#000"}}),c(C,"propTypes",{size:[String,Number],style:Object,class:String});z("t-icon-chevron-right",C);class w extends g{render(t){const s=d("t-icon",t.class,{["t-size-s"]:t.size==="small",["t-size-m"]:t.size==="medium",["t-size-l"]:t.size==="large"}),i=t.size==="small"||t.size==="medium"||t.size==="large",n={...t.style,fontSize:t.size};return o("svg",{class:s,width:i?"24":t.size,height:i?"24":t.size,style:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o("path",{d:"M15.9144 17.5L10.4144 12L15.9144 6.50003L14.5002 5.08582L7.58594 12L14.5002 18.9142L15.9144 17.5Z",fill:"black"}))}}c(w,"css",_),c(w,"defaultProps",{size:"1em",style:{fill:"#000"}}),c(w,"propTypes",{size:[String,Number],style:Object,class:String});z("t-icon-chevron-left",w);var D=Object.defineProperty,T=Object.getOwnPropertyDescriptor,V=(e,t,s,i)=>{for(var n=i>1?void 0:i?T(t,s):t,r=e.length-1,a;r>=0;r--)(a=e[r])&&(n=(i?a(t,s,n):a(n))||n);return i&&n&&D(t,s,n),n};let u=class extends g{constructor(){super(...arguments),this.dividerCss=`
    .t-divider {
      margin: var(--td-comp-margin-xs) var(--td-comp-margin-s) var(--td-comp-margin-xxs) var(--td-comp-margin-s) !important;
      color: var(--td-brand-color-light) !important;
      width: calc(100% - var(--td-comp-margin-s) * 2) !important;
    }
  `,this.menuRef=$(),this.calcScrollTopMap={},this.isOverMaxHeight=!1,this.dropdownClass=m("dropdown"),this.dropdownItemClass=m("dropdown__item"),this.dropdownMenuClass=m("dropdown__menu"),this.handleScroll=(e,t=0)=>{if(!e.target)return;const s=e.target;this.calcScrollTopMap={...this.calcScrollTopMap,[t]:s.scrollTop},this.update()},this.handleItemClick=e=>{var i,n,r;const{data:t,context:s}=e;(i=t==null?void 0:t.onClick)==null||i.call(t,t,s),(r=(n=this.props).onClick)==null||r.call(n,t,s)},this.throttleUpdate=v.exports.throttle(this.handleScroll,100),this.renderOptions=(e,t)=>{var n;const s=[];let i;return(n=e.forEach)==null||n.call(e,(r,a)=>{const l={...r},h=Math.ceil(this.calcScrollTopMap[t]/30),y=a>=h?a-h:a;l.children?(l.children=this.renderOptions(l.children,t+1),i=o("div",{key:a},o("t-dropdown-item",{css:this.props.css,class:d(l.class,`${this.dropdownItemClass}--suffix`),...l,minColumnsWidth:this.props.minColumnWidth,maxColumnsWidth:this.props.maxColumnWidth,isSubmenu:!0},o("div",{class:`${this.dropdownItemClass}-content`},this.props.direction==="right"?o(o.f,null,o("span",{class:`${this.dropdownItemClass}-text`},l.content),o("t-icon-chevron-right",{class:`${this.dropdownItemClass}-direction`,size:"16"})):o(o.f,null,o("t-icon-chevron-left",{class:`${this.dropdownItemClass}-direction`,size:"16"}),o("span",{class:`${this.dropdownItemClass}-text`},l.content))),o("div",{class:d(`${this.dropdownClass}__submenu-wrapper`,{[`${this.dropdownClass}__submenu-wrapper--${this.props.direction}`]:this.props.direction}),style:this.props.direction==="right"?{position:"absolute",top:`${y*30}px`,left:`${this.isOverMaxHeight?"calc(100% - 14px)":"calc(100% - 6px)"}`}:{position:"absolute",top:`${y*30}px`,right:`${this.isOverMaxHeight?"calc(100% - 14px)":"calc(100% - 6px)"}`}},o("div",{class:d(`${this.dropdownClass}__submenu`,{[`${this.dropdownClass}__submenu--disabled`]:l.disabled}),style:{position:"static",maxHeight:`${this.props.maxHeight}px`},onScroll:O=>this.handleScroll(O,t+1)},o("ul",null,l.children)))),l.divider?o("t-divider",{css:this.dividerCss}):null)):(delete l.children,i=o("div",{key:a},o("t-dropdown-item",{css:this.props.css,...l,minColumnsWidth:this.props.minColumnWidth,maxColumnsWidth:this.props.maxColumnWidth,onClick:l.disabled||l.children?()=>null:(O,P)=>this.handleItemClick({data:l,context:P}),class:d(l.class)},o("span",{class:`${this.dropdownItemClass}-text`},l.content)),l.divider?o("t-divider",{css:this.dividerCss}):null)),s.push(i)}),s},this.updateOverMaxHeight=()=>{var e;this.menuRef.current&&((e=this.menuRef.current.childNodes)==null?void 0:e.length)*30>this.props.maxHeight&&(this.isOverMaxHeight=!0)}}beforeUpdate(){this.updateOverMaxHeight()}render(e){const t=this.renderOptions(e.options,0);return o("div",{class:d(this.dropdownMenuClass,`${this.dropdownMenuClass}--${e.direction}`,{[`${this.dropdownMenuClass}--overflow`]:this.isOverMaxHeight}),style:{maxHeight:`${e.maxHeight}px`},ref:this.menuRef,onScroll:this.throttleUpdate},t)}};u.css=b;u.defaultProps={options:[],maxHeight:300,minColumnWidth:10,maxColumnWidth:160};u.propTypes={direction:String,maxHeight:Number,maxColumnWidth:[String,Number],minColumnWidth:[String,Number],options:Array,onClick:Function};u=V([x("t-dropdown-menu")],u);var L=Object.defineProperty,B=Object.getOwnPropertyDescriptor,k=(e,t,s,i)=>{for(var n=i>1?void 0:i?B(t,s):t,r=e.length-1,a;r>=0;r--)(a=e[r])&&(n=(i?a(t,s,n):a(n))||n);return i&&n&&L(t,s,n),n};let f=class extends g{constructor(){super(...arguments),this.dropdownClass=m("dropdown"),this.isPopupVisible=!1,this.options=[],this.getOptionsFromChildren=e=>{if(!e)return[];if(e.nodeName==="t-dropdown-menu"){const t=e.children;if(Array.isArray(t))return this.getOptionsFromChildren(t)}return v.exports.toArray(e).map(t=>{var n,r;const s=t.children;delete t.attributes.ignoreAttrs;const i=t.attributes.content;if(Array.isArray(s)){const a=(n=s==null?void 0:s.filter)==null?void 0:n.call(s,h=>!["t-dropdown-item","t-dropdown-menu"].includes(h.nodeName)),l=(r=s==null?void 0:s.filter)==null?void 0:r.call(s,h=>["t-dropdown-item","t-dropdown-menu"].includes(h.nodeName));return{...t.attributes,content:a||s,children:l.length>0?this.getOptionsFromChildren(s[1]):null}}return{...t.attributes,content:s||i,children:null}}).filter(t=>!!t.content)},this.generateDropdownOptions=(e,t)=>{if(t&&t.length>0)return t;let s;return e.forEach(i=>{!i||i.nodeName==="t-dropdown-menu"&&i.children&&(s=i.children)}),this.getOptionsFromChildren(s)},this.handleVisibleChange=(e,t)=>{var s,i;this.isPopupVisible=e,(i=(s=this.props.popupProps)==null?void 0:s.onVisibleChange)==null||i.call(s,e,t),this.update()},this.handleMenuClick=(e,t)=>{var s,i,n,r;this.props.hideAfterItemClick&&(this.isPopupVisible=!1,(i=(s=this.props.popupProps)==null?void 0:s.onVisibleChange)==null||i.call(s,!1,t)),(r=(n=this.props).onClick)==null||r.call(n,e,t),this.update()}}beforeUpdate(){const e=this.props;this.options=this.generateDropdownOptions(e.children,this.props.options)}render(e){var i,n;const t=o("t-dropdown-menu",{css:e.css,...e,options:this.options,onClick:this.handleMenuClick}),s={disabled:e.disabled,placement:e.placement,trigger:e.trigger,showArrow:!1,content:t,...v.exports.omit(e.popupProps,"onVisibleChange"),overlayInnerClassName:d(this.dropdownClass,e.class,(i=e.popupProps)==null?void 0:i.overlayInnerClassName),overlayInnerStyle:e.style};return o("t-popup",{expandAnimation:!0,destroyOnClose:!0,visible:this.isPopupVisible,onVisibleChange:this.handleVisibleChange,...s},(n=e.children)==null?void 0:n[0])}};f.css=b;f.defaultProps={direction:"right",hideAfterItemClick:!0,maxColumnWidth:100,maxHeight:300,minColumnWidth:10,placement:"bottom-left",trigger:"hover"};f.propTypes={direction:String,disabled:Boolean,hideAfterItemClick:Boolean,maxColumnWidth:[String,Number],maxHeight:Number,minColumnWidth:[String,Number],options:Array,placement:String,popupProps:Object,trigger:String,onClick:Function};f=k([x("t-dropdown")],f);
