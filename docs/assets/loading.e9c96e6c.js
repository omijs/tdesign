import{H as x,c as $,d as n,B as d,U as w}from"./index.25649000.js";import{T as c}from"./clsx.f76af8a1.js";import"./lodash.98298857.js";import{c as j,a as N,r as P}from"./dom.fa5cc4a2.js";import{g as k}from"./helper.d0a68b7e.js";import"./index.414a2e62.js";import{t as B}from"./marked.esm.01ee1597.js";function _(e,t){Object.keys(t).forEach(o=>{e.style[o]=t[o]})}function T(e){var h,m;let t={};if(!e||typeof window=="undefined")return;const{color:i,fontSize:o}=(h=window==null?void 0:window.getComputedStyle)==null?void 0:h.call(window,e),s=(m=window==null?void 0:window.navigator)==null?void 0:m.userAgent,a=/Safari/.test(s)&&!/Chrome/.test(s),l=/(?=.*iPhone)[?=.*MicroMessenger]/.test(s)&&!/Chrome/.test(s);if((a||l)&&(t={transformOrigin:"0px 0px",transform:`scale(${parseInt(o,10)/12})`}),i&&k()>11){const r=i.match(/[\d.]+/g),p=r?`rgba(${r[0]}, ${r[1]}, ${r[2]}, 0)`:"";_(e,{...t,background:`conic-gradient(from 90deg at 50% 50%,${p} 0deg, ${i} 360deg)`})}else _(e,{...t,background:""})}var L=`@keyframes t-fade-in{0%{opacity:0}to{opacity:1}}@keyframes t-fade-out{0%{opacity:1}to{opacity:0}}@keyframes t-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.t-icon-loading{animation:t-spin 1s linear infinite}@keyframes t-zoom-out{0%{transform:scale(.2)}to{transform:scale(1)}}.t-loading{font:var(--td-font-body-medium);color:var(--td-text-color-primary);box-sizing:border-box;margin:0;padding:0;list-style:none;position:relative;color:var(--td-brand-color);font-size:var(--td-comp-size-l)}.t-loading--lock{overflow:hidden}.t-loading.t-size-s{font-size:var(--td-comp-size-xxxs)}.t-loading.t-size-l{font-size:var(--td-comp-size-xxxl)}.t-loading__parent--relative{position:relative!important}.t-loading__fullscreen{position:fixed;top:0;left:0;width:100%;height:100%;z-index:3500}.t-loading--center{display:inline-flex;align-items:center;vertical-align:middle;justify-content:center}.t-loading__content{position:absolute;left:48%;top:20%}.t-loading--inherit-color{color:inherit}.t-loading__parent{position:relative}.t-loading__overlay{background-color:var(--td-mask-disabled)}.t-loading--full{position:absolute;top:0;left:0;width:100%;height:100%}.t-loading--hidden{visibility:hidden}.t-loading--visible{visibility:visible}.t-loading__text{width:auto;display:inline-block;vertical-align:middle;font:var(--td-font-body-medium);margin-left:var(--td-comp-margin-xs)}.t-loading__gradient{display:inline-flex;justify-content:center;align-items:center;vertical-align:middle}.t-loading__gradient-conic{width:100%;height:100%;border-radius:var(--td-radius-circle);background:conic-gradient(from 90deg at 50% 50%,#fff 0deg,currentcolor 360deg);-webkit-mask:radial-gradient(transparent calc(50% - .5px),#fff 50%);mask:radial-gradient(transparent calc(50% - .5px),#fff 50%)}
`,z=L+B,D=Object.defineProperty,I=Object.getOwnPropertyDescriptor,A=(e,t,i,o)=>{for(var s=o>1?void 0:o?I(t,i):t,a=e.length-1,l;a>=0;a--)(l=e[a])&&(s=(o?l(t,i,s):l(s))||s);return o&&s&&D(t,i,s),s};let g=class extends x{constructor(){super(...arguments),this.conicRef=$(),this.useCircleAdapter=()=>{const e=this.conicRef.current;T(e)}}installed(){this.useCircleAdapter()}render(){const e=c("loading__gradient");return n("svg",{className:d(e,c("icon-loading")),viewBox:"0 0 12 12",version:"1.1",width:"1em",height:"1em",xmlns:"http://www.w3.org/2000/svg"},n("foreignObject",{x:"0",y:"0",width:"12",height:"12"},n("div",{class:c("loading__gradient-conic"),ref:this.conicRef})))}};g.css=z;g.isLightDOM=!0;g=A([w("t-loading-gradient")],g);var M=Object.defineProperty,R=Object.getOwnPropertyDescriptor,U=(e,t,i,o)=>{for(var s=o>1?void 0:o?R(t,i):t,a=e.length-1,l;a>=0;a--)(l=e[a])&&(s=(o?l(t,i,s):l(s))||s);return o&&s&&M(t,i,s),s};let f=class extends x{constructor(){super(...arguments),this.componentName=c("loading"),this.lockClass=`${this.componentName}--lock`,this.textClass=`${this.componentName}__text`,this.centerClass=`${this.componentName}--center`,this.inheritColorClass=`${this.componentName}--inherit-color`,this.fullClass=`${this.componentName}--full`,this.fullscreenClass=`${this.componentName}__fullscreen`,this.overlayClass=`${this.componentName}__overlay`,this.relativeClass=`${this.componentName}__parent`,this.flag=!1,this.setTimer=()=>{const{delay:e,loading:t}=this.props;e&&t?this.timer=setTimeout(()=>{this.showLoading=t,this.flag=!0,this.update()},e):(this.showLoading=t,this.flag=!0,this.update())},this.setBodyClass=()=>{const{loading:e,preventScrollThrough:t,fullscreen:i}=this.props;t&&i&&j&&e&&N(document.body,this.lockClass)},this.calcStyles=()=>{const{zIndex:e,size:t}=this.props,i={};return e!==void 0&&Object.assign(i,{zIndex:e}),["small","medium","large"].includes(t)||Object.assign(i,{fontSize:t}),this.props.style?{...i,...this.props.style}:i},this.commonContent=()=>{const{indicator:e,text:t}=this.props;let i=n("t-loading-gradient",{style:{display:"inline-flex"}});return e&&typeof e!="boolean"&&(i=e),n(n.f,null,e?i:null,t?n("div",{className:this.textClass},t):null)}}beforeUpdate(){this.props.loading===!0&&this.flag===!1&&this.setTimer(),this.flag===!1||this.props.loading===!1?this.showLoading=this.props.delay?!1:this.props.loading:this.flag=!1,this.setBodyClass()}uninstall(){clearTimeout(this.timer),P(document.body,this.lockClass)}render(e){const{componentName:t,fullClass:i,centerClass:o,overlayClass:s,relativeClass:a,fullscreenClass:l,inheritColorClass:h,calcStyles:m,commonContent:r,showLoading:p}=this,{fullscreen:O,content:y,children:b,loading:C,showOverlay:S}=e,u=this.calcStyles(),v=d(o,{[c("size-s")]:e.size==="small",[c("size-l")]:e.size==="large",[c("size-m")]:e.size==="medium"},{[h]:e.inheritColor},e.class);return O?C?n("div",{class:d(t,l,o,s),style:u},n("div",{class:v},r())):null:y||b.length>0?n("div",{class:a},y||b,p?n("div",{class:d(t,v,i,{[s]:S}),style:u},r()):null):C?n("div",{class:d(t,v),style:u},r()):null}};f.css=[z,`:host {
  display: inline-flex;
}`];f.defaultProps={delay:0,fullscreen:!1,indicator:!0,inheritColor:!1,loading:!0,preventScrollThrough:!0,showOverlay:!0,size:"medium"};f.propTypes={attach:[Object,String],children:Object,content:Object,delay:Number,fullscreen:Boolean,indicator:[Boolean,Object],inheritColor:Boolean,loading:Boolean,preventScrollThrough:Boolean,showOverlay:Boolean,size:String,text:Object,zIndex:Number};f=U([w("t-loading")],f);export{f as L};
