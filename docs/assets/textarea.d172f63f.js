import{W as F,c as O,V as z,p as b,$}from"./index.79a2e431.js";import{t as j}from"./marked.esm.01ee1597.js";import{T as C}from"./clsx.f76af8a1.js";import"./lodash.966b3234.js";import"./index.01b533f1.js";import{n as H}from"./noop.ee300efa.js";import{c as K,l as A,b as N}from"./helper.a6745112.js";function M(e){return e===null}var S=M,B=`.t-textarea{font:var(--td-font-body-medium);color:var(--td-text-color-primary);box-sizing:border-box;margin:0;padding:0;list-style:none;position:relative;width:100%}.t-textarea__inner{display:flex;width:100%;height:var(--td-comp-size-xxxl);min-height:var(--td-comp-size-xxxl);border:1px solid var(--td-border-level-2-color);border-radius:var(--td-radius-default);padding:calc(calc(var(--td-comp-size-m) - var(--td-line-height-body-medium)) / 2) var(--td-comp-paddingLR-s);background-color:var(--td-bg-color-specialcomponent);font:var(--td-font-body-medium);color:var(--td-text-color-primary);resize:vertical;outline:none;transition:all cubic-bezier(.38,0,.24,1) .2s,height 0s;box-sizing:border-box}.t-textarea__inner:hover{border-color:var(--td-brand-color)}.t-textarea__inner:focus{border-color:var(--td-brand-color);box-shadow:0 0 0 2px var(--td-brand-color-focus)}.t-textarea__inner::placeholder{color:var(--td-text-color-placeholder)}.t-textarea__inner.t-is-success{border-color:var(--td-success-color)}.t-textarea__inner.t-is-success:focus{box-shadow:0 0 0 2px var(--td-success-color-focus)}.t-textarea__inner.t-is-warning{border-color:var(--td-warning-color)}.t-textarea__inner.t-is-warning:focus{box-shadow:0 0 0 2px var(--td-warning-color-focus)}.t-textarea__inner.t-is-error{border-color:var(--td-error-color)}.t-textarea__inner.t-is-error:focus{box-shadow:0 0 0 2px var(--td-error-color-focus)}.t-textarea__info_wrapper{display:flex;column-gap:var(--td-comp-margin-s);justify-content:space-between}.t-textarea__info_wrapper_align{justify-content:end}.t-textarea__limit{font:var(--td-font-body-small);color:var(--td-text-color-placeholder)}.t-textarea .t-is-disabled{color:var(--td-text-color-disabled);background-color:var(--td-bg-color-component-disabled);cursor:not-allowed}.t-textarea .t-is-disabled:hover{border-color:var(--td-border-level-2-color)}.t-textarea .t-is-disabled::placeholder{color:var(--td-text-color-disabled)}.t-textarea .t-resize-none{resize:none}.t-textarea__tips{height:auto;min-height:var(--td-comp-size-xs);font:var(--td-font-body-small);display:inline-block}.t-textarea__tips--normal{color:var(--td-text-color-placeholder)}.t-textarea__tips--success{color:var(--td-success-color)}.t-textarea__tips--warning{color:var(--td-warning-color)}.t-textarea__tips--error{color:var(--td-error-color)}
`,L=B+j;const E=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`;let n;function T(e,o=1,r=null){var f;n||(n=document.createElement("textarea"),document.body.appendChild(n));const{paddingSize:s,borderSize:i,boxSizing:d,sizingStyle:p}=K(e);n.setAttribute("style",`${p};${E}`),n.value=e.value||e.placeholder||"";let c=n.scrollHeight;const g={},v=d==="border-box";v?c+=i:d==="content-box"&&(c-=s),n.value="";const y=n.scrollHeight-s;(f=n==null?void 0:n.parentNode)==null||f.removeChild(n),n=null;const m=u=>{let t=y*u;return v&&(t=t+s+i),t};if(!S(o)){const u=m(o);c=Math.max(u,c),g.minHeight=`${u}px`}return S(r)||(c=Math.min(m(r),c)),g.height=`${c}px`,g}var I=Object.defineProperty,D=Object.getOwnPropertyDescriptor,R=(e,o,r,s)=>{for(var i=s>1?void 0:s?D(o,r):o,d=e.length-1,p;d>=0;d--)(p=e[d])&&(i=(s?p(o,r,i):p(i))||i);return s&&i&&I(o,r,i),i};const P=e=>C("textarea__")+e;let _=class extends F{constructor(){super(...arguments),this.value="",this.isFocused=!1,this.textArea=O(),this.textareaClassPrefix="t-textarea",this.inputValueChangeHandle=e=>{const{target:o}=e;let r=o.value;if(!this.props.allowInputOverMax&&!this.textArea.current&&(r=A(r,this.props.maxlength),this.props.maxcharacter&&this.props.maxcharacter>=0)){const s=N(r,this.props.maxcharacter);r=typeof s=="object"&&s.characters}this.value=r,this.update()}}installed(){const{value:e,disabled:o,maxlength:r,maxcharacter:s,readonly:i,autofocus:d,style:p,onKeydown:c=H,onKeypress:g=H,onKeyup:v=H,autosize:l,status:y,tips:m,allowInputOverMax:f,...u}=this.props;this.value=e,this.eventPropsNames=Object.keys(u).filter(a=>/^on[A-Z]/.test(a)),this.eventProps=this.eventPropsNames.reduce((a,h)=>(Object.assign(a,{[h]:x=>{o||(h==="onFocus"&&(this.isFocused=!0,this.update()),h==="onBlur"&&(this.isFocused=!1,this.update()),this.props[h](x.currentTarget.value,{e:x}),x.stopPropagation())}}),a),{}),this.update();let t=this.textArea.current;this.value=t.value,l===!0?t.addEventListener("input",()=>{let a=T(t),h=a.minHeight,x=a.height;t.style.minHeight=h,t.style.height=x}):typeof l=="object"&&t.addEventListener("input",()=>{let a=T(t,l==null?void 0:l.minRows,l==null?void 0:l.maxRows),h=a.minHeight,x=a.height;t.style.minHeight=h,t.style.height=x});let w=s;w&&t.addEventListener("input",()=>{const a=t.value;this.countCharacters(a)>w&&(a[a.length-1].match("/[\u4E00-\u9FA5]/g")?t.value=a.slice(0,w-1):t.value=a.slice(0,w))})}countCharacters(e){const o=/[\u4e00-\u9fa5]/g,r=e.match(o)||[];return e.length+r.length}getTextareaStatus(e){return C(`is-${e||""}`)}getTipsStyle(e){return P(`tips--${e}`)}getTextareaIsDisabled(e){return C(`is-${e?"disabled":""}`)}cls(){return z(P("inner"),{[`${this.textareaClassPrefix}-is-${this.props.status}`]:this.props.status,[`${this.textareaClassPrefix}-is-disabled`]:this.props.disabled,[`${this.textareaClassPrefix}-is-focused`]:this.isFocused,[`${this.textareaClassPrefix}-resize-none`]:typeof this.props.autosize=="object"})}render(e,o){const{autofocus:r,autosize:s,placeholder:i,readonly:d,value:p,status:c,disabled:g,tips:v,maxlength:l,maxcharacter:y,onKeydown:m,onKeypress:f,onKeyup:u}=e;return b(b.f,null,b("div",{class:z(C("textarea"))},b("textarea",{...this.eventProps,class:this.cls(),value:this.value,placeholder:i,readonly:d,disabled:g,autofocus:r,maxlength:l,maxcharacter:y,onChange:t=>{this.inputValueChangeHandle(t)},onKeyPress:t=>f(t.currentTarget.value,{e:t}),onKeyDown:t=>m(t.currentTarget.value,{e:t}),onKeyUp:t=>u(t.currentTarget.value,{e:t}),ref:this.textArea}),v&&b("div",{class:z(P("tips"),this.getTipsStyle(c))},v)))}};_.css=L;_.defaultProps={allowInputOverMax:!1,autofocus:!1,autosize:!1,disabled:!1,readonly:!1,value:""};_.propTypes={allowInputOverMax:Boolean,autofocus:Boolean,autosize:[Boolean,Object],disabled:Boolean,readonly:Boolean,style:String,label:String,tips:String,status:String,maxcharacter:Number,maxlength:Number,name:String,placeholder:String,value:String,defaultValue:String,onBlur:Function,onChange:Function,onFocus:Function,onKeydown:Function,onKeypress:Function,onKeyup:Function};_=R([$("t-textarea")],_);
